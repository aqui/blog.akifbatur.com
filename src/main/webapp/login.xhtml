<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:sec="http://www.springframework.org/security/tags">

	<h:head>
        <f:facet name="first">
            <meta http-equiv="X-UA-Compatible" content="IE=edge" />
            <meta content="text/html; charset=UTF-8" http-equiv="Content-Type" />
            <meta name="viewport" content="width=device-width, initial-scale=1" />
            <title>akif batur - blog</title>
        </f:facet> 
        <f:facet name="middle">
            <h:outputStylesheet name="bootstrap/css/bootstrap.css" />
            <h:outputScript name="/js/jquery-1.11.3.js" />
            <h:outputScript name="bootstrap/js/bootstrap.js" />
        </f:facet>        
        <f:facet name="last">
 			<h:outputStylesheet name="css/font-awesome.css" />
        </f:facet> 
    </h:head>
	
	<h:body>
		<sec:authorize ifAnyGranted="ROLE_USER, ROLE_ADMIN">
			<div class="container" align="center">
				hello #{request.userPrincipal.principal.username}?
				<form action="${request.contextPath}/logout" method="post" name="logoutForm">
					<input type="hidden" name="${_csrf.parameterName}" value="${_csrf.token}"/>
				</form>
				<a href="${request.contextPath}/">home</a>
				||
				<a href="" onclick='document.logoutForm.submit();'>logout</a>
			</div>
		</sec:authorize>
		<sec:authorize ifNotGranted="ROLE_USER">
			<c:if test="${not empty param.error}">
				#{loginController.loginError(param['error'])}
			</c:if>
			<div class="container" align="center">
				<div class="row">
					<div class="col-lg-12">
						<p:panelGrid columns="2">
						    <f:facet name="header">
						        <p:outputLabel value="Login"></p:outputLabel>
						    </f:facet>
						 	<h:form prependId="false" id="loginForm">
								<p:growl id="growl" life="3000"/>
								<input type="hidden" name="${_csrf.parameterName}" value="${_csrf.token}"/>
							    <h:outputLabel for="userName" value="Username:" style="font-weight:bold"/>
							    <p:inputText id="userName" value="#{loginController.userName}" required="true" label="Username"/>
							 	<br/><br/>
							    <h:outputLabel for="password" value="Password:" style="font-weight:bold"/>
							    <p:keyboard id="password" value="#{loginController.password}" required="true" label="Password" password="true"/>
							 	<br/><br/>
							    <p:commandButton update="growl" action="#{loginController.doLogin}" ajax="false" value="Login" icon="ui-icon-check" validateClient="true" style="margin-right:10px"/>
						    </h:form>    
						</p:panelGrid>
					</div>
				</div>
			</div>
		</sec:authorize>
	</h:body>
</html>